<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>ç¯å¢ƒå‡†å¤‡ | qingyu-docs</title>
    <meta name="description" content="é¡¹ç›®æ€»ç»“">
    <link rel="stylesheet" href="/yunshan-qingyu-docs/assets/style.c3210e46.css">
    <link rel="modulepreload" href="/yunshan-qingyu-docs/assets/app.2f45899f.js">
    <link rel="modulepreload" href="/yunshan-qingyu-docs/assets/learning_index.md.f620b335.lean.js">
    
    <meta name="twitter:title" content="ç¯å¢ƒå‡†å¤‡ | qingyu-docs">
  <meta property="og:title" content="ç¯å¢ƒå‡†å¤‡ | qingyu-docs">
  </head>
  <body>
    <div id="app"><!--[--><div class="theme"><header class="nav-bar" data-v-675d8756><div class="sidebar-button" data-v-675d8756><svg class="icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z" class></path></svg></div><a class="nav-bar-title" href="/yunshan-qingyu-docs/" aria-label="qingyu-docs, back to home" data-v-675d8756 data-v-cc01ef16><!----> qingyu-docs</a><div class="flex-grow" data-v-675d8756></div><div class="nav" data-v-675d8756><nav class="nav-links" data-v-675d8756 data-v-eab3edfe><!--[--><div class="item" data-v-eab3edfe><div class="nav-link" data-v-eab3edfe data-v-b8818f8c><a class="item active" href="/yunshan-qingyu-docs/learning/" data-v-b8818f8c>é¡¹ç›®æ€»ç»“ <!----></a></div></div><!--]--><!----><!----></nav></div><!--[--><!--]--></header><aside class="sidebar" data-v-83e92a68><nav class="nav-links nav" data-v-83e92a68 data-v-eab3edfe><!--[--><div class="item" data-v-eab3edfe><div class="nav-link" data-v-eab3edfe data-v-b8818f8c><a class="item active" href="/yunshan-qingyu-docs/learning/" data-v-b8818f8c>é¡¹ç›®æ€»ç»“ <!----></a></div></div><!--]--><!----><!----></nav><!--[--><!--]--><ul class="sidebar-links" data-v-83e92a68><!--[--><li class="sidebar-link"><p class="sidebar-link-item"></p><ul class="sidebar-links"><li class="sidebar-link"><a class="sidebar-link-item active" href="/yunshan-qingyu-docs/learning/">æ€»ç»“</a><ul class="sidebar-links"><li class="sidebar-link"><a class="sidebar-link-item" href="#ç¯å¢ƒå‡†å¤‡">ç¯å¢ƒå‡†å¤‡</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="#ç•Œé¢é€»è¾‘">ç•Œé¢é€»è¾‘</a><ul class="sidebar-links"><li class="sidebar-link"><a class="sidebar-link-item" href="#å…¨å±€åˆ†æ">å…¨å±€åˆ†æ</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="#çƒ­ç‚¹èšé›†">çƒ­ç‚¹èšé›†</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="#æ¯å‘¨æŠ¥è¡¨-ä¸“é¢˜åˆ†æ">æ¯å‘¨æŠ¥è¡¨ &amp; ä¸“é¢˜åˆ†æ</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="#ä¿¡æ¯æ£€ç´¢">ä¿¡æ¯æ£€ç´¢</a><!----></li></ul></li><li class="sidebar-link"><a class="sidebar-link-item" href="#composition-api">Composition Api</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="#å·¥å…·å‡½æ•°">å·¥å…·å‡½æ•°</a><ul class="sidebar-links"><li class="sidebar-link"><a class="sidebar-link-item" href="#axios">axios</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="#storage">storage</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="#usepage">usePage</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="#usecurrentinstance">useCurrentInstance</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="#useecharts">useEcharts</a><!----></li></ul></li><li class="sidebar-link"><a class="sidebar-link-item" href="#è·¨åŸŸé—®é¢˜">è·¨åŸŸé—®é¢˜</a><ul class="sidebar-links"><li class="sidebar-link"><a class="sidebar-link-item" href="#åå°å¤„ç†-åå‘ä»£ç†">åå°å¤„ç†(åå‘ä»£ç†)</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="#å‰ç«¯å¤„ç†-æ­£å‘ä»£ç†">å‰ç«¯å¤„ç†(æ­£å‘ä»£ç†)</a><!----></li></ul></li><li class="sidebar-link"><a class="sidebar-link-item" href="#å¼€å‘ç¯å¢ƒ-mock">å¼€å‘ç¯å¢ƒ mock</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="#åº”ç”¨éƒ¨ç½²">åº”ç”¨éƒ¨ç½²</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="#åŠŸèƒ½äº®ç‚¹">åŠŸèƒ½äº®ç‚¹</a><ul class="sidebar-links"><li class="sidebar-link"><a class="sidebar-link-item" href="#è¾“å…¥æ¡†çº§è”">è¾“å…¥æ¡†çº§è”</a><!----></li></ul></li><li class="sidebar-link"><a class="sidebar-link-item" href="#è¡¥å……çŸ¥è¯†">è¡¥å……çŸ¥è¯†</a><ul class="sidebar-links"><li class="sidebar-link"><a class="sidebar-link-item" href="#object-çš„åºåˆ—åŒ–">Object çš„åºåˆ—åŒ–</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="#ç±»å‹åˆ¤æ–­">ç±»å‹åˆ¤æ–­</a><!----></li></ul></li></ul></li></ul></li><!--]--></ul><!--[--><!--]--></aside><div class="sidebar-mask"></div><main class="page" data-v-7eddb2c4><div class="container" data-v-7eddb2c4><!--[--><!--]--><div style="position:relative;" class="content" data-v-7eddb2c4><div><h2 id="ç¯å¢ƒå‡†å¤‡" tabindex="-1">ç¯å¢ƒå‡†å¤‡ <a class="header-anchor" href="#ç¯å¢ƒå‡†å¤‡" aria-hidden="true">#</a></h2><p>Vue3 + Vite + Typescript</p><p>node ç‰ˆæœ¬åœ¨ 14 ç‰ˆæœ¬ä»¥ä¸Š</p><p><a href="https://zhuanlan.zhihu.com/p/421493074" target="_blank" rel="noopener noreferrer">git bash é…ç½®ä½œä¸ºé»˜è®¤æ§åˆ¶å°</a></p><h2 id="ç•Œé¢é€»è¾‘" tabindex="-1">ç•Œé¢é€»è¾‘ <a class="header-anchor" href="#ç•Œé¢é€»è¾‘" aria-hidden="true">#</a></h2><p><img src="/yunshan-qingyu-docs/framework.png" alt=""></p><h3 id="å…¨å±€åˆ†æ" tabindex="-1">å…¨å±€åˆ†æ <a class="header-anchor" href="#å…¨å±€åˆ†æ" aria-hidden="true">#</a></h3><p><img src="/yunshan-qingyu-docs/hot-words.png" alt=""></p><p><img src="/yunshan-qingyu-docs/active-user.png" alt=""></p><p>â„¹ï¸ å…¨å±€åˆ†æé‡Œé¢æœ‰å¾ˆå¤šä¸ªæ¨¡å—ï¼Œæ¯ä¸ªæ¨¡å—çš„æ¨¡ç‰ˆï¼Œæ•°æ®ï¼Œæ ·å¼å…¶å®éƒ½æ˜¯éš”ç¦»çš„ï¼Œæ‰€ä»¥æˆ‘ä»¬å€¾å‘äºæ˜¯æŠŠæ¯ä¸€ä¸ªæ¨¡å—éƒ½æŠ½è±¡ä¸ºæ˜¯ä¸€ä¸ªç»„ä»¶ï¼Œæ›¾ç»åœ¨é¢è¯•çš„æ—¶å€™æœ‰é¢è¯•å®˜é—®è¿‡æˆ‘ï¼Œç»„ä»¶æ˜¯ä»€ä¹ˆï¼Ÿä¸ºä»€ä¹ˆæˆ‘ä»¬éœ€è¦ç»„ä»¶ï¼Ÿå…¶å®æˆ‘æ²¡æœ‰å›ç­”å¾—å¾ˆå¥½ï¼Œæˆ‘è§‰å¾—ç»„ä»¶å…¶å®æ˜¯ä¸€ä¸ªæ¨¡å—çš„æ‹†åˆ†ï¼Œé‡Œé¢çš„æ•°æ®å¯èƒ½ä¾èµ–äºå¤–éƒ¨ä¼ é€’ï¼Œä¹Ÿå¯èƒ½å†…éƒ¨æœ‰è‡ªå·±å®ç°çš„é€»è¾‘ã€‚<a href="https://zhuanlan.zhihu.com/p/33999571" target="_blank" rel="noopener noreferrer">çŸ¥ä¹</a></p><h4 id="ä¸»è¦é€»è¾‘" tabindex="-1">ä¸»è¦é€»è¾‘ <a class="header-anchor" href="#ä¸»è¦é€»è¾‘" aria-hidden="true">#</a></h4><ul><li>å…¨å±€åˆ†æçš„ç»„ä»¶ä¸»è¦åœ¨ components/common ä¸‹ï¼Œæ¯ä¸€ä¸ªæ–‡ä»¶å¤¹å†…éƒ¨åˆæŠ½å–äº†ä¸€ä¸ª item.vue å’Œ index.vueï¼Œå› ä¸ºå…¶å®åƒä¸Šé¢æ´»è·ƒç”¨æˆ·å®ƒæ˜¯ç”±å¤šä¸ªå…ƒç´ çš„ã€‚</li></ul><div class="language-html"><pre><code><span class="token comment">&lt;!-- å¯¹åº” item.vue --&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>card--body<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>img</span> <span class="token attr-name">:src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>data.logo<span class="token punctuation">&quot;</span></span> <span class="token attr-name">alt</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span><span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>content<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>name<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>{{ data.user }}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>blogs<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>å‘å¸–æ•° <span class="token entity named-entity" title="Â ">&amp;nbsp;</span>{{ data.creates }}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">lang</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&#39;</span>ts<span class="token punctuation">&#39;</span></span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
<span class="token keyword">import</span> <span class="token punctuation">{</span> defineComponent<span class="token punctuation">,</span> ref <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#39;vue&#39;</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token function">defineComponent</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">&#39;ActiveCardItem&#39;</span><span class="token punctuation">,</span>
  <span class="token literal-property property">props</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">data</span><span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token literal-property property">required</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
      <span class="token literal-property property">type</span><span class="token operator">:</span> Object
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token function">setup</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> ellipsis <span class="token operator">=</span> <span class="token function">ref</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span>

    <span class="token keyword">return</span> <span class="token punctuation">{</span>
      ellipsis
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><div class="language-html"><pre><code><span class="token comment">&lt;!-- index.vue --&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>active_user<span class="token punctuation">&quot;</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>model--title<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>æ´»è·ƒç”¨æˆ·<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>chart<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>card-item</span> <span class="token attr-name">v-for</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>item in activeUsers<span class="token punctuation">&quot;</span></span> <span class="token attr-name">:key</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>item.id<span class="token punctuation">&quot;</span></span> <span class="token attr-name">:data</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>item<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>

</code></pre></div><p>åœ¨ index.vue é€šè¿‡è·å–æ•°æ®ç„¶åé€šè¿‡ v-for æ¸²æŸ“ item.vueï¼Œè¿™æ ·çš„å¥½å¤„åœ¨äºæ•°æ®è·å–çš„é€»è¾‘å°±éš”ç¦»åœ¨äº† index.vueï¼Œ è§†å›¾æ¸²æŸ“é€»è¾‘å°±éš”ç¦»åœ¨ item.vue ä¸¤è€…é€šè¿‡ç»„ä»¶é€šä¿¡çš„æ–¹å¼è¿›è¡Œä¿¡æ¯ä¼ é€’ï¼Œé€»è¾‘å¯èƒ½ä¼šæ›´åŠ æ¸…æ™°ä¸€äº›ï¼Œå½“ç„¶å…¶å®æ”¾åœ¨ä¸€èµ·ä¹Ÿæ˜¯æ²¡é—®é¢˜çš„ï¼Œæ¯ä¸ªäººéƒ½æœ‰æ¯ä¸ªäººä¸åŒçš„ç»„ç»‡æ€è·¯ï¼Œå…¶å®æœ€åèƒ½å¤Ÿå®Œæˆä»»åŠ¡æ€ä¹ˆå®ç°éƒ½æ˜¯å¯ä»¥çš„ã€‚</p><p>â— åœ¨æˆ‘ä»¬å†™å¥½äº†è¿™äº›ä¸šåŠ¡ç»„ä»¶ä»¥åï¼Œæ€ä¹ˆæ ·æŠŠå®ƒæ”¾åˆ°å…¨å±€åˆ†æä¸Šå»å‘¢ï¼Ÿæˆ‘ä»¬éœ€è¦è€ƒè™‘ä¸€ä¸ªé—®é¢˜ï¼šæ•°æ®è·å–çš„é€»è¾‘åˆ°åº•æ˜¯æ”¾åœ¨æ¯ä¸ªç»„ä»¶é‡Œé¢è¿˜æ˜¯è¯´ç»Ÿä¸€ç”±çˆ¶ç»„ä»¶ä¼ é€’è¿›å»ï¼Ÿ</p><div class="language-html"><pre><code><span class="token comment">&lt;!-- å…¨å±€åˆ†æ index.vue --&gt;</span>      
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>container<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a-row</span> <span class="token attr-name">:gutter</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>10<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
          <span class="token comment">&lt;!-- çƒ­ç‚¹è¯æ±‡ --&gt;</span>
          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a-col</span> <span class="token attr-name">:span</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>24<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>wordcloud</span> <span class="token attr-name">v-if</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>isShow<span class="token punctuation">&quot;</span></span> <span class="token attr-name">:wordcloud-data</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>wordCloudData<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a-col</span><span class="token punctuation">&gt;</span></span>
          <span class="token comment">&lt;!-- æ´»è·ƒç”¨æˆ· --&gt;</span>
          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a-col</span> <span class="token attr-name">:span</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>24<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>active-user</span> <span class="token attr-name">v-if</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>isShow<span class="token punctuation">&quot;</span></span> <span class="token attr-name">:active-users</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>activeUserData<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a-col</span><span class="token punctuation">&gt;</span></span>
          <span class="token comment">&lt;!-- çƒ­ç‚¹æ–°é—» --&gt;</span>
          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a-col</span> <span class="token attr-name">:span</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>24<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>daily-hot</span> <span class="token attr-name">v-if</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>isShow<span class="token punctuation">&quot;</span></span> <span class="token attr-name">:hot-news</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>hotNews<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a-col</span><span class="token punctuation">&gt;</span></span>
          <span class="token comment">&lt;!-- åšä¸»åˆ†æ --&gt;</span>
          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a-col</span> <span class="token attr-name">:span</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>24<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>blog-analyse</span> <span class="token attr-name">v-if</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>isShow<span class="token punctuation">&quot;</span></span> <span class="token attr-name">:ranking</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>rankingData<span class="token punctuation">&quot;</span></span> <span class="token attr-name">:school-pie-data</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>schoolPieData<span class="token punctuation">&quot;</span></span> <span class="token attr-name">:school-table-data</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>schoolTableData<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a-col</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a-row</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><p>å…¶å®ä¸¤ç§æ–¹å¼éƒ½æ˜¯å¯ä»¥çš„ï¼Œåªæ˜¯è¯´åé¢å¤„ç†çš„æ–¹å¼ä¸ä¸€æ ·ï¼Œé‚£æˆ‘ä¸¤ç§æ–¹æ³•éƒ½è¯´ä¸‹ï¼š</p><ol><li>ç»Ÿä¸€ç”±çˆ¶ç»„ä»¶ä¼ é€’è¿›å»</li></ol><div class="language-ts"><pre><code>  <span class="token keyword">const</span> <span class="token function-variable function">initData</span> <span class="token operator">=</span> <span class="token keyword">async</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token builtin">Promise</span><span class="token punctuation">.</span><span class="token function">all</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token function">getUsers</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token function">getHotNews</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token function">getWordCloud</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token function">useBloggerAnalyse</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">]</span> <span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span>dataLists <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      activeUserData<span class="token punctuation">.</span>value <span class="token operator">=</span> dataLists<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token comment">// æ›´æ–°æ´»è·ƒç”¨æˆ·æ•°æ®</span>
      hotNews<span class="token punctuation">.</span>value <span class="token operator">=</span> dataLists<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token comment">// æ›´æ–°çƒ­ç‚¹æ–°é—»æ•°æ®</span>
      wordCloudData<span class="token punctuation">.</span>value <span class="token operator">=</span> dataLists<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span> <span class="token comment">// æ›´æ–°è¯äº‘æ•°æ®</span>
      rankingData<span class="token punctuation">.</span>value <span class="token operator">=</span> <span class="token punctuation">(</span>dataLists<span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">]</span> <span class="token keyword">as</span> <span class="token builtin">any</span><span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span>
      schoolPieData<span class="token punctuation">.</span>value <span class="token operator">=</span> <span class="token punctuation">(</span>dataLists<span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">]</span> <span class="token keyword">as</span> <span class="token builtin">any</span><span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span>
      schoolTableData<span class="token punctuation">.</span>value <span class="token operator">=</span> <span class="token punctuation">(</span>dataLists<span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">]</span> <span class="token keyword">as</span> <span class="token builtin">any</span><span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span>
      <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        isShow<span class="token punctuation">.</span>value <span class="token operator">=</span> <span class="token boolean">true</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token number">1500</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
</code></pre></div><p>ä½¿ç”¨ initData å‡½æ•°è·å–æ‰€æœ‰ç»„ä»¶çš„æ•°æ®ï¼Œç„¶ååƒä¸Šé¢ä»£ç ä¸­é€šè¿‡ v-bind çš„æ–¹å¼å»ç»‘å®šæ•°æ®è¿›è¡Œçˆ¶å­ç»„ä»¶é€šä¿¡ã€‚æˆ‘åœ¨é¡¹ç›®ä¸­ä½¿ç”¨çš„æ˜¯è¿™æ ·æ–¹å¼ï¼ŒåŸå› åº”è¯¥æœ‰ä¸¤ä¸ªï¼š</p><p>ğŸ˜‰ ç¬¬ä¸€ï¼šå¯ä»¥æ§åˆ¶ç»„ä»¶ä»€ä¹ˆæ—¶å€™æ˜¾ç¤ºï¼Œä¹Ÿå°±æ˜¯è¯´æˆ‘å¯ä»¥é€šè¿‡åœ¨æ¯ä¸ªç»„ä»¶ä¸Šè®¾ç½®ä¸€ä¸ª isShow çš„å€¼ï¼Œåªæœ‰å½“æ•°æ®å…¨éƒ¨åŠ è½½å®Œæˆä»¥åæ‰è¿›è¡Œè§†å›¾çš„å±•ç¤ºï¼Œå¦åˆ™å°±æ˜¾ç¤ºåŠ è½½åŠ¨ç”»ã€‚(ä¸»è¦)</p><p>ğŸ˜‰ ç¬¬äºŒï¼šå¦‚æœéœ€è¦æ ¹æ®æ—¶é—´/ å…³é”®å­—è·å–æ•°æ®çš„è¯å¯ä»¥ç»Ÿä¸€åœ¨ initData å†…éƒ¨åŠ  (æ¬¡è¦)</p><ol start="2"><li>æ¯ä¸ªå­ç»„ä»¶å•ç‹¬è·å–æ•°æ®</li></ol><div class="language-html"><pre><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>container<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a-row</span> <span class="token attr-name">:gutter</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>10<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
          <span class="token comment">&lt;!-- çƒ­ç‚¹è¯æ±‡ --&gt;</span>
          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a-col</span> <span class="token attr-name">:span</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>24<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>wordcloud</span> <span class="token punctuation">/&gt;</span></span>
          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a-col</span><span class="token punctuation">&gt;</span></span>
          <span class="token comment">&lt;!-- æ´»è·ƒç”¨æˆ· --&gt;</span>
          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a-col</span> <span class="token attr-name">:span</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>24<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>active-user</span> <span class="token punctuation">/&gt;</span></span>
          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a-col</span><span class="token punctuation">&gt;</span></span>
          <span class="token comment">&lt;!-- çƒ­ç‚¹æ–°é—» --&gt;</span>
          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a-col</span> <span class="token attr-name">:span</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>24<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>daily-hot</span> <span class="token punctuation">/&gt;</span></span>
          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a-col</span><span class="token punctuation">&gt;</span></span>
          <span class="token comment">&lt;!-- åšä¸»åˆ†æ --&gt;</span>
          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a-col</span> <span class="token attr-name">:span</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>24<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>blog-analyse</span><span class="token punctuation">/&gt;</span></span>
          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a-col</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a-row</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><p>å¯¹åº”çš„ HTML ä»£ç åº”è¯¥å°±æ˜¯è¿™æ ·çš„ï¼Œç„¶ååœ¨ wordcloud ç»„ä»¶é‡Œé¢è·å– wordcloud æ•°æ®ï¼Œåœ¨ active-user é‡Œé¢è·å– active-user æ•°æ®.....ï¼Œè‡³äºè¯´æ€ä¹ˆæ ¹æ®æ—¶é—´ / å…³é”®å­—å»æ›´æ–°æ•°æ®çš„è¯å¯ä»¥é€šè¿‡ <a href="https://www.javascriptc.com/vue3js/api/special-attributes.html#ref" target="_blank" rel="noopener noreferrer">ref</a> å¼•ç”¨åˆ°å­ç»„ä»¶ï¼Œç„¶åè°ƒç”¨å­ç»„ä»¶çš„æ–¹å¼é¡ºä¾¿ä¼ é€’æ•°æ®ã€‚</p><div class="language-html"><pre><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a-col</span> <span class="token attr-name">:span</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>24<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
   <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>wordcloud</span> <span class="token attr-name">ref</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>wordcloud<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a-col</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a-col</span> <span class="token attr-name">:span</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>24<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>active-user</span> <span class="token attr-name">ref</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>activeUser<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a-col</span><span class="token punctuation">&gt;</span></span>
...
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span>
export default defineComponent({
  setup() {
      const wordcloud = ref()
      const activeUser = ref()
      ...
      const onGetData = (type, time) =&gt; {
          wordcloud.value.getData(type, time)
          activeUser.value.getData(type, time)
          ....
      }
  }  
})
&lt;/&gt;
</code></pre></div><p>â„¹ï¸ è¿™æ ·ä¹Ÿæ˜¯å¯ä»¥çš„ï¼Œä½†æ˜¯æˆ‘è§‰å¾—æœ‰ä¸€ä¸ªæœ€å¤§çš„ç¼ºç‚¹å°±æ˜¯çˆ¶ç»„ä»¶éš¾ä»¥æ§åˆ¶å­ç»„ä»¶æ˜¯å¦æ˜¾ç¤ºã€‚æ¯”å¦‚è¯´ wordcloud çš„æ•°æ®å¾ˆå¿«å°±åŠ è½½å®Œäº†ï¼Œä½†æ˜¯ activeUser çš„æ•°æ®è¿˜æ˜¯æ²¡æœ‰çš„ï¼Œé‚£ä¹ˆæ­¤æ—¶é¡µé¢å°±ä¼šæœ‰ä¸ªç©ºç™½çš„æƒ…å†µï¼Œæˆ‘ä»¬å¯ä»¥ç»™æ¯ä¸ªç»„ä»¶éƒ½è®¾å®šä¸€ä¸ª loading çš„é€»è¾‘ä¹Ÿæ˜¯å¯ä»¥çš„ï¼Œä½†æ˜¯ç›¸å¯¹æ¥è¯´å°±æ²¡æœ‰é‚£ä¹ˆæ–¹ä¾¿å§ã€‚ä½†æ˜¯å¥ˆä½•è¿™ç§æ–¹å¼å…¶å®æ›´å®¹æ˜“ç†è§£ï¼Œæ‰€ä»¥å®é™…ä¸­ä½¿ç”¨å“ªä¸€ç§å…¶å®ä¹Ÿæ²¡æœ‰ç‰¹åˆ«é™åˆ¶ï¼Œæ ¹æ®éœ€æ±‚å»åˆ‡æ¢å…¶å®å°±å¥½äº†ã€‚</p><h3 id="çƒ­ç‚¹èšé›†" tabindex="-1">çƒ­ç‚¹èšé›† <a class="header-anchor" href="#çƒ­ç‚¹èšé›†" aria-hidden="true">#</a></h3><p><img src="/yunshan-qingyu-docs/hoT-news.png" alt=""></p><p>é€‰æ‹©â€œå¹³å°â€å’Œâ€œæ—¶é—´â€ éƒ½å¯ä»¥å®ç°æ•°æ®çš„åˆ‡æ¢ï¼Œé‚£æ˜¯æ€ä¹ˆåšçš„å‘¢ï¼Ÿ</p><div class="language-html"><pre><code>    <span class="token comment">&lt;!-- æ—¶é—´é€‰æ‹© --&gt;</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a-select</span> <span class="token attr-name"><span class="token namespace">v-model:</span>value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>timeslot<span class="token punctuation">&quot;</span></span> <span class="token attr-name">:options</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>option<span class="token punctuation">&quot;</span></span> <span class="token attr-name">@change</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>onTimeChange<span class="token punctuation">&quot;</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>select<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a-select</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a-tabs</span> <span class="token attr-name"><span class="token namespace">v-model:</span>activeKey</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>platform<span class="token punctuation">&quot;</span></span> <span class="token attr-name">animated</span> <span class="token attr-name">@change</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>onPlatformChange<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a-tab-pane</span> <span class="token attr-name">key</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>1<span class="token punctuation">&quot;</span></span> <span class="token attr-name">tab</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>çŸ¥ä¹<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>chart<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>card-item</span> <span class="token attr-name">v-for</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>item in cardData<span class="token punctuation">&quot;</span></span> <span class="token attr-name">:key</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>item.id<span class="token punctuation">&quot;</span></span> <span class="token attr-name">:data</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>item<span class="token punctuation">&quot;</span></span> <span class="token attr-name">@click</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>onPageRedirct(item.id)<span class="token punctuation">&quot;</span></span>   <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>item<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a-tab-pane</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a-tabs</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><div class="language-ts"><pre><code>  <span class="token keyword">const</span> <span class="token function-variable function">onTimeChange</span> <span class="token operator">=</span> <span class="token punctuation">(</span>value<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&#39;on time change&#39;</span><span class="token punctuation">)</span>
    <span class="token function">onChange</span><span class="token punctuation">(</span>value<span class="token punctuation">,</span> <span class="token keyword">null</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>

  <span class="token keyword">const</span> <span class="token function-variable function">onPlatformChange</span> <span class="token operator">=</span> <span class="token punctuation">(</span>value<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&#39;platform change&#39;</span><span class="token punctuation">)</span>
    <span class="token function">onChange</span><span class="token punctuation">(</span><span class="token keyword">null</span><span class="token punctuation">,</span> value<span class="token punctuation">)</span>
  <span class="token punctuation">}</span>

  <span class="token keyword">const</span> <span class="token function-variable function">onChange</span> <span class="token operator">=</span> <span class="token keyword">async</span> <span class="token punctuation">(</span>time<span class="token operator">?</span><span class="token operator">:</span><span class="token builtin">string</span><span class="token operator">|</span><span class="token keyword">null</span><span class="token punctuation">,</span> platform<span class="token operator">?</span><span class="token operator">:</span><span class="token builtin">string</span><span class="token operator">|</span><span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>time<span class="token punctuation">,</span> platform<span class="token punctuation">)</span>
    cardData<span class="token punctuation">.</span>value <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>
    <span class="token comment">// é‡æ–°è¿›è¡Œæ•°æ®çš„èµ‹å€¼</span>
    cardData<span class="token punctuation">.</span>value <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token function">XRequest</span><span class="token punctuation">(</span><span class="token punctuation">{</span> url<span class="token operator">:</span> <span class="token constant">API</span><span class="token punctuation">.</span>hotSpot<span class="token punctuation">,</span> param<span class="token operator">:</span> <span class="token punctuation">{</span> time<span class="token punctuation">,</span> platform <span class="token punctuation">}</span> <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
</code></pre></div><h4 id="ä¸»è¦é€»è¾‘-1" tabindex="-1">ä¸»è¦é€»è¾‘ <a class="header-anchor" href="#ä¸»è¦é€»è¾‘-1" aria-hidden="true">#</a></h4><p>â„¹ï¸ æœ¬è´¨ä¸Šæ˜¯é€šè¿‡ç›‘å¬ select é€‰æ‹©æ¡†å’Œ tabs çš„è§¦å‘äº‹ä»¶ï¼Œä¹Ÿå°±æ˜¯ä¸Šé¢çš„ onTimeChange å’Œ onPlatfromChange(ant-desigin-vue æä¾›çš„ change äº‹ä»¶)ã€‚æ¯æ¬¡è§¦å‘çš„æ—¶å€™å°†å¯¹åº”çš„å‚æ•°ä¼ é€’åˆ°è·å–æ•°æ®çš„å‡½æ•°é‚£é‡Œé‡æ–°è¯·æ±‚æ•°æ®ã€‚</p><h3 id="æ¯å‘¨æŠ¥è¡¨-ä¸“é¢˜åˆ†æ" tabindex="-1">æ¯å‘¨æŠ¥è¡¨ &amp; ä¸“é¢˜åˆ†æ <a class="header-anchor" href="#æ¯å‘¨æŠ¥è¡¨-ä¸“é¢˜åˆ†æ" aria-hidden="true">#</a></h3><blockquote><p>ä¸¤ä¸ªæ¨¡å—æ”¾åœ¨ä¸€èµ·è®²æ˜¯å› ä¸ºå®ƒä»¬å…¶å®æ˜¯ç±»ä¼¼çš„ï¼Œå› ä¸ºå…¶å®éƒ½æ˜¯è¡¨æ ¼ç„¶ååŸºäºä¸åŒçš„æ¡ä»¶è¿›è¡Œæ•°æ®çš„ç­›é€‰</p></blockquote><img src="/yunshan-qingyu-docs/weekly-report.png" alt="image-20220520151300897" style="zoom:67%;"><h4 id="ä¸»è¦çš„é€»è¾‘" tabindex="-1">ä¸»è¦çš„é€»è¾‘ <a class="header-anchor" href="#ä¸»è¦çš„é€»è¾‘" aria-hidden="true">#</a></h4><ol><li>ç‚¹å‡»æŸ¥çœ‹çš„æ—¶å€™ä¼ é€’æ—¶é—´åºåˆ—(å¼€å§‹äº‹ä»¶-ç»“æŸæ—¶é—´)ç»™åå°ï¼Œç„¶ååå°æ ¹æ®æ—¶é—´æ£€ç´¢å¯¹åº”çš„æ•°æ®è¿”å›ç»™æˆ‘ä»¬ã€‚å…·ä½“çš„æ•°æ®è·å–é€»è¾‘å’Œå…¨å±€åˆ†æé‡Œé¢æ˜¯ç±»ä¼¼çš„ã€‚</li></ol><div class="language-js"><pre><code><span class="token keyword">const</span> <span class="token function-variable function">initData</span> <span class="token operator">=</span> <span class="token keyword">async</span> <span class="token punctuation">(</span><span class="token parameter">startTime<span class="token punctuation">,</span> endTime</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    Promise<span class="token punctuation">.</span><span class="token function">all</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token function">getUsers</span><span class="token punctuation">(</span>startTime<span class="token punctuation">,</span> endTime<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token function">getHotNews</span><span class="token punctuation">(</span>startTime<span class="token punctuation">,</span> endTime<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token function">getWordCloud</span><span class="token punctuation">(</span>startTime<span class="token punctuation">,</span> endTime<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token function">useBloggerAnalyse</span><span class="token punctuation">(</span>startTime<span class="token punctuation">,</span> endTime<span class="token punctuation">)</span><span class="token punctuation">]</span> <span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token parameter">dataLists</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      activeUserData<span class="token punctuation">.</span>value <span class="token operator">=</span> dataLists<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token comment">// æ›´æ–°æ´»è·ƒç”¨æˆ·æ•°æ®</span>
      hotNews<span class="token punctuation">.</span>value <span class="token operator">=</span> dataLists<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token comment">// æ›´æ–°çƒ­ç‚¹æ–°é—»æ•°æ®</span>
      wordCloudData<span class="token punctuation">.</span>value <span class="token operator">=</span> dataLists<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span> <span class="token comment">// æ›´æ–°è¯äº‘æ•°æ®</span>
      rankingData<span class="token punctuation">.</span>value <span class="token operator">=</span> <span class="token punctuation">(</span>dataLists<span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">]</span> <span class="token keyword">as</span> any<span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span>
      schoolPieData<span class="token punctuation">.</span>value <span class="token operator">=</span> <span class="token punctuation">(</span>dataLists<span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">]</span> <span class="token keyword">as</span> any<span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span>
      schoolTableData<span class="token punctuation">.</span>value <span class="token operator">=</span> <span class="token punctuation">(</span>dataLists<span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">]</span> <span class="token keyword">as</span> any<span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span>
      <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        isShow<span class="token punctuation">.</span>value <span class="token operator">=</span> <span class="token boolean">true</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token number">1500</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
</code></pre></div><p>ğŸ”‘ å…¶å® initData è¿™ä¸ªå‡½æ•°å°±æ˜¯å…¨å±€åˆ†æé‡Œé¢çš„é‚£ä¸ª initDataï¼Œåªä¸è¿‡æˆ‘ä»¬ä¼ é€’äº†å¼€å§‹æ—¶é—´å’Œç»“æŸæ—¶é—´ä¸¤ä¸ªå‚æ•°è¿›å»è€Œå·²ï¼Œæ‰€ä»¥è¿™ä¹Ÿæ˜¯ä¸ºä»€ä¹ˆåœ¨ä»£ç é‡Œé¢æŠŠè¿™ä¸ª initData å‡½æ•°æ”¾åˆ° controller é‡Œé¢çš„åŸå› ï¼Œå› ä¸ºè¿™ä¸ªæ˜¯å¯ä»¥å¤ç”¨çš„ã€‚</p><p>ğŸ˜‰ é‚£å¯¹äºä¸“é¢˜åˆ†ææ¥è¯´ï¼Œä¼ é€’è¿›å»çš„æ•°æ®å¯èƒ½å°±æ˜¯å¼€å§‹æ—¶é—´ï¼Œç»“æŸæ—¶é—´ï¼Œå…³é”®å­—ï¼ŒinitData ä¾ç„¶å¯ä»¥ä¸å˜å‘€ï¼</p><p>â— é‚£å¦‚æœæ¨¡å—ä¸ä¸€æ ·äº†æ€ä¹ˆåŠï¼Œé‚£å°±ç®€å•äº†ï¼Œé‡æ–°å†™ä¸ªå’Œ initData ç±»ä¼¼çš„å‡½æ•°ä¸å°±å¯ä»¥äº†å˜›ã€‚</p><ol start="2"><li>æ–°å»ºæŠ¥è¡¨ / æ–°å»ºåˆ†æ</li></ol><div class="language-js"><pre><code><span class="token keyword">const</span> reportState <span class="token operator">=</span> <span class="token function">reactive</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
      <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">&#39;&#39;</span><span class="token punctuation">,</span>
      <span class="token literal-property property">date</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token keyword">const</span> <span class="token function-variable function">setConfirm</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token comment">// æŠŠ reportState çš„æ•°æ®ä¼ é€’ç»™åå°å³å¯</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="ä¿¡æ¯æ£€ç´¢" tabindex="-1">ä¿¡æ¯æ£€ç´¢ <a class="header-anchor" href="#ä¿¡æ¯æ£€ç´¢" aria-hidden="true">#</a></h3><h2 id="composition-api" tabindex="-1">Composition Api <a class="header-anchor" href="#composition-api" aria-hidden="true">#</a></h2><blockquote><p>controller é‡Œé¢çš„ .ts æ–‡ä»¶ã€‚ç›®çš„ä¹Ÿæ˜¯ä¸ºäº†é€»è¾‘å¯å¤ç”¨å’ŒæŠ½ç¦»ã€‚</p></blockquote><div class="language-js"><pre><code><span class="token comment">// æŠ½å–çƒ­ç‚¹èšé›†å¹³å°åˆ‡æ¢çš„é€»è¾‘åˆ° src/controllers/hotspot/useCard.ts</span>
<span class="token keyword">const</span> <span class="token function-variable function">onTimeChange</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter"><span class="token literal-property property">value</span><span class="token operator">:</span> string</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&#39;on time change&#39;</span><span class="token punctuation">)</span>
    <span class="token function">onChange</span><span class="token punctuation">(</span>value<span class="token punctuation">,</span> <span class="token keyword">null</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>

  <span class="token comment">/* å¹³å°åºåˆ— */</span>
  <span class="token keyword">const</span> platform <span class="token operator">=</span> <span class="token function">ref</span><span class="token punctuation">(</span><span class="token string">&#39;1&#39;</span><span class="token punctuation">)</span>
  <span class="token keyword">const</span> <span class="token function-variable function">onPlatformChange</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter"><span class="token literal-property property">value</span><span class="token operator">:</span> string</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&#39;platform change&#39;</span><span class="token punctuation">)</span>
    <span class="token function">onChange</span><span class="token punctuation">(</span><span class="token keyword">null</span><span class="token punctuation">,</span> value<span class="token punctuation">)</span>
  <span class="token punctuation">}</span>

  <span class="token comment">/* æ—¶é—´åˆ‡æ¢ &amp; å¹³å°åˆ‡æ¢ åŒé‡å¤„ç† */</span>
  <span class="token keyword">const</span> <span class="token function-variable function">onChange</span> <span class="token operator">=</span> <span class="token keyword">async</span> <span class="token punctuation">(</span><span class="token parameter">time<span class="token operator">?</span><span class="token operator">:</span>string<span class="token operator">|</span><span class="token keyword">null</span><span class="token punctuation">,</span> platform<span class="token operator">?</span><span class="token operator">:</span>string<span class="token operator">|</span><span class="token keyword">null</span></span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>time<span class="token punctuation">,</span> platform<span class="token punctuation">)</span>
    cardData<span class="token punctuation">.</span>value <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>
    cardData<span class="token punctuation">.</span>value <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token function">XRequest</span><span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token literal-property property">url</span><span class="token operator">:</span> <span class="token constant">API</span><span class="token punctuation">.</span>hotSpot<span class="token punctuation">,</span> <span class="token literal-property property">param</span><span class="token operator">:</span> <span class="token punctuation">{</span> time<span class="token punctuation">,</span> platform <span class="token punctuation">}</span> <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
</code></pre></div><p>:star ä¸€èˆ¬ composition api æŠ½å–å‡ºæ¥çš„å‡½æ•°ä»¥ use + &#39;xxxx&#39; æ¥å‘½åè¡¨ç¤ºæ˜¯å†…éƒ¨æŠ½å–é€»è¾‘ã€‚</p><div class="language-js"><pre><code><span class="token keyword">export</span> <span class="token keyword">function</span> <span class="token function">useCard</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
<span class="token keyword">export</span> <span class="token keyword">function</span> <span class="token function">useOverview</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
<span class="token operator">...</span>

<span class="token comment">// åœ¨ç»„ä»¶å¼•ç”¨çš„æ—¶å€™</span>
<span class="token keyword">const</span> <span class="token punctuation">{</span> <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token function">useCard</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token keyword">const</span> <span class="token punctuation">{</span> <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token function">useOverview</span><span class="token punctuation">(</span><span class="token punctuation">)</span> 
</code></pre></div><h2 id="å·¥å…·å‡½æ•°" tabindex="-1">å·¥å…·å‡½æ•° <a class="header-anchor" href="#å·¥å…·å‡½æ•°" aria-hidden="true">#</a></h2><div class="tip custom-block"><p class="custom-block-title">TIP</p><p>å…¶å®ä¹Ÿå°±æ˜¯ utils é‡Œé¢çš„å‡½æ•°ï¼Œè¿™äº›å‡½æ•°å†™å¥½ä¸€æ¬¡ä»¥åæ˜¯å¯ä»¥ç›´æ¥æ¬åˆ°åˆ«çš„é¡¹ç›®é‡Œé¢ç”¨çš„ï¼Œè¿™ä¹Ÿæ˜¯ä¸ºä»€ä¹ˆå®ƒä»¬å«å·¥å…·å‡½æ•°çš„åŸå› ã€‚</p></div><h3 id="axios" tabindex="-1">axios <a class="header-anchor" href="#axios" aria-hidden="true">#</a></h3><blockquote><p>è¯·æ±‚å·¥å…·å‡½æ•°ï¼Œå°è£…å¥½äº†ä»¥åå¯¼å‡ºä¸€ä¸ªå‡½æ•°å®ä¾‹ï¼Œå¯ä»¥é€šè¿‡ä¼ é€’ä¸åŒçš„å‚æ•°æ¥å®ç°ä¸åŒçš„ç½‘ç»œè¯·æ±‚ï¼Œå°è£…çš„ç›®çš„æ˜¯ä¸ºäº†ä½¿å¾—å‡½æ•°æ•´ä½“çš„å¤ç”¨æ€§æ›´å¼ºã€‚</p></blockquote><div class="language-js"><pre><code><span class="token comment">// axios.ts </span>
<span class="token keyword">import</span> type <span class="token punctuation">{</span> AxiosInstance<span class="token punctuation">,</span> AxiosRequestConfig<span class="token punctuation">,</span> AxiosResponse <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#39;axios&#39;</span>
<span class="token keyword">import</span> axios <span class="token keyword">from</span> <span class="token string">&#39;axios&#39;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> <span class="token constant">HEADERS</span> <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#39;./headers&#39;</span>

<span class="token keyword">export</span> <span class="token keyword">const</span> <span class="token literal-property property">http</span><span class="token operator">:</span> AxiosInstance <span class="token operator">=</span> axios<span class="token punctuation">.</span><span class="token function">create</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  <span class="token comment">/* baseURL: import.<wbr>meta.env.MODE === &#39;development&#39;
    ? &#39;/prod&#39;
    : &#39;/prod&#39; */</span>
  <span class="token literal-property property">headers</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token string-property property">&#39;Content-Type&#39;</span><span class="token operator">:</span> <span class="token constant">HEADERS</span><span class="token punctuation">.</span><span class="token constant">JSON</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>

<span class="token comment">/* è¯·æ±‚æ‹¦æˆªé…ç½®(é’ˆå¯¹å½“å‰é¡¹ç›®ä¸€èˆ¬æ˜¯ application/json) */</span>
http<span class="token punctuation">.</span>interceptors<span class="token punctuation">.</span>request<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter"><span class="token literal-property property">config</span><span class="token operator">:</span> AxiosRequestConfig</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token comment">// æ·»åŠ  token ä¼ é€’å’ŒéªŒè¯</span>
  <span class="token keyword">return</span> config
<span class="token punctuation">}</span><span class="token punctuation">)</span>

<span class="token comment">/* å“åº”æ‹¦æˆªé…ç½®(é’ˆå¯¹å½“å‰é¡¹ç›®å­˜åœ¨ä¸€äº›ä¸åŒçš„ responseType) */</span>
http<span class="token punctuation">.</span>interceptors<span class="token punctuation">.</span>response<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter"><span class="token literal-property property">response</span><span class="token operator">:</span> AxiosResponse</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token comment">// æ‹¦æˆªå“åº”ä¿¡æ¯è¿›è¡Œç›¸åº”çš„é‡å®šå‘å¤„ç†</span>
  <span class="token comment">// console.log(response);</span>
  <span class="token comment">// return response.data.data</span>
  <span class="token keyword">return</span> response<span class="token punctuation">.</span>data<span class="token punctuation">.</span>res<span class="token punctuation">.</span>data
<span class="token punctuation">}</span><span class="token punctuation">)</span>

</code></pre></div><ul><li>ä¸Šé¢å…¶å®ä¸»è¦å°±æ˜¯åˆ›å»ºäº†ä¸€ä¸ª axios å®ä¾‹ã€‚ç„¶åå¯¹å®ä¾‹è¿›è¡Œåˆå§‹åŒ–çš„é…ç½®ï¼Œæ¯”å¦‚ä¸€ä¸ª baseURLï¼Œæ‹¦æˆªå™¨ç­‰ã€‚</li></ul><div class="language-ts"><pre><code><span class="token comment">// src/utils/axios/index.ts</span>
<span class="token keyword">export</span> <span class="token keyword">function</span> <span class="token function">XRequest</span> <span class="token punctuation">(</span>properties<span class="token operator">:</span> RequestParam<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">let</span> data<span class="token operator">:</span> <span class="token punctuation">{</span> params<span class="token operator">?</span><span class="token operator">:</span> <span class="token builtin">any</span><span class="token punctuation">;</span> data<span class="token operator">?</span><span class="token operator">:</span> <span class="token builtin">any</span><span class="token punctuation">;</span> <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
  <span class="token keyword">const</span> <span class="token punctuation">{</span> url<span class="token punctuation">,</span> method <span class="token operator">=</span> <span class="token string">&#39;get&#39;</span><span class="token punctuation">,</span> param<span class="token punctuation">,</span> headers<span class="token punctuation">,</span> options <span class="token punctuation">}</span> <span class="token operator">=</span> properties

  <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name"><span class="token builtin">Promise</span></span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token function-variable function">resolve</span><span class="token operator">:</span> <span class="token punctuation">(</span>value<span class="token operator">:</span> <span class="token builtin">any</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token keyword">void</span><span class="token punctuation">,</span> reject<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>options<span class="token operator">?.</span>isToken<span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token comment">// é…ç½® token</span>
      http<span class="token punctuation">.</span>defaults<span class="token punctuation">.</span>headers<span class="token punctuation">.</span>common<span class="token punctuation">.</span>Authorization <span class="token operator">=</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">Bearer 	</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>localStorage<span class="token punctuation">.</span><span class="token function">getItem</span><span class="token punctuation">(</span><span class="token string">&#39;token&#39;</span><span class="token punctuation">)</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span> <span class="token operator">||</span> <span class="token string">&#39;&#39;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">if</span> <span class="token punctuation">(</span>method <span class="token operator">===</span> <span class="token string">&#39;get&#39;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      data <span class="token operator">=</span> <span class="token punctuation">{</span> params<span class="token operator">:</span> param <span class="token punctuation">}</span>
    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>method <span class="token operator">===</span> <span class="token string">&#39;delete&#39;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      data <span class="token operator">=</span> <span class="token punctuation">{</span> params<span class="token operator">:</span> param <span class="token punctuation">}</span>
    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>method <span class="token operator">===</span> <span class="token string">&#39;post&#39;</span> <span class="token operator">||</span> method <span class="token operator">===</span> <span class="token string">&#39;put&#39;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      data <span class="token operator">=</span> <span class="token punctuation">{</span> data<span class="token operator">:</span> <span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">stringify</span><span class="token punctuation">(</span>param<span class="token punctuation">)</span> <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>

    <span class="token comment">// å®é™…çš„è¯·æ±‚æ–¹æ³•</span>
    <span class="token function">http</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
      url<span class="token punctuation">,</span>
      method<span class="token punctuation">,</span>
      <span class="token operator">...</span>data
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span>response<span class="token operator">:</span> AxiosResponse<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      <span class="token comment">/* console.info(response) */</span>
      <span class="token keyword">const</span> res_data<span class="token operator">:</span> IResponse <span class="token operator">=</span> response
      <span class="token keyword">if</span> <span class="token punctuation">(</span>res_data<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token function">resolve</span><span class="token punctuation">(</span>res_data<span class="token punctuation">)</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">catch</span><span class="token punctuation">(</span><span class="token punctuation">(</span>err<span class="token operator">:</span> AxiosError<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      <span class="token function">reject</span><span class="token punctuation">(</span>err<span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre></div><ul><li>XRequest æ–¹æ³•å…¶å®å°±æ˜¯æˆ‘ä»¬æœ€åå°è£…å¯¼å‡ºçš„è¯·æ±‚å‡½æ•°ï¼Œå¯ä»¥çœ‹åˆ°å®ƒå†…éƒ¨æ˜¯å¯¹æˆ‘ä»¬ä¼ å…¥å‚æ•°è¿›è¡Œäº†å¤„ç†ï¼Œå¦‚æœæ˜¯ get æ–¹æ³•.....ï¼Œå¦‚æœæ˜¯ postæ–¹æ³• ....ï¼Œ å¦‚æœéœ€è¦ token éªŒè¯......ã€‚æ‰€ä»¥æˆ‘ä»¬å¯ä»¥é€šè¿‡ä¼ é€’ä¸åŒçš„å‚æ•°æ§åˆ¶æœ€åè¯·æ±‚çš„è¡Œä¸ºæ¥è¾¾åˆ°ä¸åŒçš„ç›®çš„ã€‚å†…éƒ¨çš„ http å…¶å®å°±æ˜¯æˆ‘ä»¬åˆšåˆšåˆ›å»ºçš„ axios å®ä¾‹ï¼Œæ¯æ¬¡è¯·æ±‚å…¶å®éƒ½æ˜¯ç”¨ axios å®ä¾‹å»è¯·æ±‚ã€‚</li></ul><blockquote><p>â— é‡Œé¢æœ‰ä¸€ä¸ªå¯ä¼˜åŒ–çš„ç‚¹ï¼Œæˆ‘ä»¬æ¯æ¬¡å¯¼å…¥ http çš„æ—¶å€™ï¼Œéƒ½å¾—å»åˆ›å»ºä¸€ä¸ª axios å®ä¾‹ï¼Œé‚£å…¶å®å¸¦æ¥çš„æ˜¯èµ„æºçš„æµªè´¹ï¼Œå› ä¸ºå…¶å®éƒ½æ˜¯ä¸€ä¸ª axios å˜›ï¼Œé‚£æˆ‘ä»¬å¯ä¸å¯ä»¥åˆ¤æ–­ axios æ˜¯å¦åˆ›å»ºäº†ï¼Œåˆ›å»ºäº†å°±ç›´æ¥å¤ç”¨åŸæ¥çš„å°±å¥½äº†ï¼Œè¿™æ˜¯ä¸€ä¸ªå¯ä»¥è€ƒè™‘å»ä¼˜åŒ–çš„ç‚¹ï¼ˆè®¾è®¡æ¨¡å¼ä¸­çš„å•ä¾‹æ¨¡å¼ï¼‰</p></blockquote><p>ä¸Šé¢çš„é…ç½®å…¶å®éƒ½æ˜¯æ ¹æ®ä¸åŒçš„é¡¹ç›®åŠ¨æ€å˜åŒ–çš„ï¼Œæ¯”å¦‚å¯¹äºæˆ‘ä»¬å½“å‰çš„é¡¹ç›®æ¥è¯´ï¼Œéœ€è¦æˆ‘ä»¬ä¼ é€’çš„ Content-Type æ˜¯ mutipart/form-data ä¹Ÿå°±æ˜¯ form-data æ•°æ®ã€‚</p><div class="language-js"><pre><code><span class="token comment">// é‚£æˆ‘å°±åŠ å…¥è¿™ä¸ªåˆ¤æ–­ -- åˆ¤æ–­æ˜¯å¦æ˜¯éœ€è¦æˆ‘ä»¬ä¼ é€’ form-data ç±»å‹çš„æ•°æ®  </span>
<span class="token keyword">if</span> <span class="token punctuation">(</span>options<span class="token operator">?.</span>isFile<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">const</span> contentType <span class="token operator">=</span> headers <span class="token operator">&amp;&amp;</span> headers<span class="token punctuation">[</span><span class="token string">&#39;Content-Type&#39;</span><span class="token punctuation">]</span>
      <span class="token keyword">const</span> formData <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">FormData</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
      <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">const</span> item <span class="token keyword">in</span> param<span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token comment">// æ·»åŠ å‚æ•°è¿› å…¥ formData ä¸­</span>
        formData<span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span>item<span class="token punctuation">,</span> param<span class="token punctuation">[</span>item<span class="token punctuation">]</span><span class="token punctuation">)</span>
      <span class="token punctuation">}</span>
      data <span class="token operator">=</span> <span class="token punctuation">{</span> <span class="token literal-property property">data</span><span class="token operator">:</span> formData <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
</code></pre></div><h3 id="storage" tabindex="-1">storage <a class="header-anchor" href="#storage" aria-hidden="true">#</a></h3><blockquote><p>localStorage ç¼“å­˜èº«ä»½éªŒè¯ç </p></blockquote><div class="language-ts"><pre><code><span class="token keyword">type</span> <span class="token class-name">StorageItem</span> <span class="token operator">=</span> <span class="token punctuation">{</span>
  content<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">,</span>
  lastTime<span class="token operator">:</span> <span class="token builtin">number</span>
<span class="token punctuation">}</span>

<span class="token comment">/**
 * @class æœ¬åœ°localStorage å°è£…
 */</span>

<span class="token keyword">export</span> <span class="token keyword">class</span> <span class="token class-name">LocalStorge</span> <span class="token punctuation">{</span>
  limit <span class="token operator">=</span> <span class="token number">60</span> <span class="token operator">*</span> <span class="token number">60</span> <span class="token operator">*</span> <span class="token number">24</span> <span class="token operator">*</span> <span class="token number">1000</span> <span class="token comment">// ä¸€å¤©</span>

  <span class="token comment">/* è·å¾—ç¼“å­˜å†…å®¹ */</span>
  <span class="token function">getLocalItem</span> <span class="token punctuation">(</span>key<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> nowTime <span class="token operator">=</span> <span class="token operator">+</span><span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token keyword">const</span> keyword <span class="token operator">=</span> localStorage<span class="token punctuation">.</span><span class="token function">getItem</span><span class="token punctuation">(</span>key<span class="token punctuation">)</span><span class="token operator">!</span>

    <span class="token keyword">if</span> <span class="token punctuation">(</span>keyword <span class="token operator">===</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token comment">/* ä¸å­˜åœ¨ content */</span>
      <span class="token keyword">return</span> <span class="token number">0</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">const</span> item <span class="token operator">=</span> <span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">parse</span><span class="token punctuation">(</span>keyword<span class="token punctuation">)</span> <span class="token keyword">as</span> StorageItem
    <span class="token keyword">if</span> <span class="token punctuation">(</span>nowTime <span class="token operator">-</span> item<span class="token operator">?.</span>lastTime <span class="token operator">&gt;=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>limit<span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token comment">/* content è¿‡æœŸ */</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">deleteLocalItem</span><span class="token punctuation">(</span>key<span class="token punctuation">)</span>
      <span class="token keyword">return</span> <span class="token number">1</span>
    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
      <span class="token keyword">return</span> item<span class="token punctuation">.</span>content
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>

  <span class="token comment">/* è®¾ç½®ç¼“å­˜å†…å®¹ */</span>
  <span class="token function">setLocalItem</span> <span class="token punctuation">(</span>key<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">,</span> content<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> item<span class="token operator">:</span> StorageItem <span class="token operator">=</span> <span class="token punctuation">{</span>
      content<span class="token operator">:</span> content<span class="token punctuation">,</span>
      lastTime<span class="token operator">:</span> <span class="token operator">+</span><span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
    localStorage<span class="token punctuation">.</span><span class="token function">setItem</span><span class="token punctuation">(</span>
      key<span class="token punctuation">,</span>
      <span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">stringify</span><span class="token punctuation">(</span>item<span class="token punctuation">)</span>
    <span class="token punctuation">)</span>
  <span class="token punctuation">}</span>

  <span class="token comment">/* åˆ é™¤ç¼“å­˜å†…å®¹ */</span>
  <span class="token function">deleteLocalItem</span> <span class="token punctuation">(</span>key<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    localStorage<span class="token punctuation">.</span><span class="token function">removeItem</span><span class="token punctuation">(</span>key<span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

</code></pre></div><blockquote><p>localStorage æ˜¯æŒä¹…æ€§çš„å­˜å‚¨ï¼ŒæŒä¹…æ€§æŒ‡çš„æ˜¯å¦‚æœä¸æ‰‹åŠ¨å»æ¸…é™¤çš„è¯å®ƒå°±ä¸€ç›´éƒ½åœ¨ï¼Œè¿™å…¶å®æ˜¯ä¸å¥½çš„ï¼Œå› æ­¤æœ‰å¿…è¦è®¾å®šä¸€ä¸ªæœ‰æ•ˆæœŸæ¥åˆ¤æ–­ä¸€ä¸ªå­˜å‚¨å†…å®¹å—çš„åˆæ³•æ€§ã€‚</p></blockquote><p>ä¸Šé¢çš„é€»è¾‘ä¸»è¦æ˜¯åœ¨ setLocalItem çš„æ—¶å€™ï¼Œå°† content å’Œ lastTime æ‰“åŒ…ä¸€èµ·å­˜è¿›å»ï¼ŒlastTime æŒ‡çš„æ˜¯å­˜è¿›å…¥çš„æ—¶é—´ï¼Œç„¶ååœ¨ getItem çš„æ—¶å€™ç”¨å½“å‰æ—¶é—´ - ä¸Šæ¬¡å­˜è¿›å»çš„æ—¶é—´(nowTime - lastTime)çš„å€¼ä¸ limit (æœ‰æ•ˆæ—¶é—´èŒƒå›´) è¿›è¡Œå¯¹æ¯”ï¼Œå¦‚æœåœ¨è¿™ä¸ªèŒƒå›´å†…çš„è¯ï¼Œé‚£ä¹ˆæˆ‘ä»¬å°±è®¤ä¸ºè¿™ä¸ªç¼“å­˜æ˜¯æœ‰æ•ˆçš„ï¼Œå¦åˆ™å°±æç¤ºç”¨æˆ·ç¼“å­˜è¿‡æœŸç„¶åæ¸…é™¤æ‰å½“å‰çš„ç¼“å­˜(é‡ç½®çš„è¿‡ç¨‹)ã€‚</p><p>ğŸ˜„ å…¶å®è®°ä½å¯†ç æˆ‘è§‰å¾—ä¹Ÿæ˜¯è¿™ä¹ˆåšçš„ï¼Œæœ€ç®€å•çš„å°±æ˜¯ç‚¹å‡»è®°ä½å¯†ç ä»¥åå­˜å…¥ç¼“å­˜ï¼Œæ¯æ¬¡åˆ°ç™»å½•é¡µçš„æ—¶å€™å»çœ‹çœ‹ç¼“å­˜æœ‰æ²¡æœ‰ç”¨æˆ·åå’Œå¯†ç ï¼Œå½“ç„¶è¿™æ ·å¾ˆä¸å®‰å…¨ï¼Œå› ä¸ºå¯†ç æ˜¯å¯ä»¥åœ¨å¼€å‘è€…å·¥å…·è¢«äººçœ‹åˆ°çš„ã€‚(é…åˆåå°å®ç°çš„æ–¹æ³•æ›´ä¼˜ï¼šç¼“å­˜è®°ä½å¯†ç è¿™ä¸ªå¸ƒå°”å€¼ï¼Œè‡ªåŠ¨è¯·æ±‚æ¥å£)</p><h3 id="usepage" tabindex="-1">usePage <a class="header-anchor" href="#usepage" aria-hidden="true">#</a></h3><blockquote><p>å°è£…è·¯ç”±è·³è½¬å‡½æ•°</p></blockquote><ul><li><a href="https://router.vuejs.org/zh/api/#routelocationraw" target="_blank" rel="noopener noreferrer">vue-router RouteLocationRaw ä»‹ç»</a></li></ul><div class="language-ts"><pre><code><span class="token keyword">import</span> <span class="token punctuation">{</span> RouteLocationRaw <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#39;vue-router&#39;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> PageEnum <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#39;@/enum/pageEnum&#39;</span>
<span class="token keyword">import</span> router <span class="token keyword">from</span> <span class="token string">&#39;../router&#39;</span>

<span class="token keyword">export</span> <span class="token keyword">type</span> <span class="token class-name">RouteLocationRawEx</span> <span class="token operator">=</span> Omit<span class="token operator">&lt;</span>RouteLocationRaw<span class="token punctuation">,</span> <span class="token string">&#39;path&#39;</span><span class="token operator">&gt;</span> <span class="token operator">&amp;</span> <span class="token punctuation">{</span> path<span class="token operator">:</span> PageEnum <span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token comment">/**
 * @function è‡ªå®šä¹‰Vue-Routerå¯¼èˆªå‡½æ•°
 * @returns {Function} go
 */</span>
<span class="token keyword">export</span> <span class="token keyword">function</span> <span class="token function">useGo</span> <span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token builtin">Function</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> <span class="token punctuation">{</span> push<span class="token punctuation">,</span> replace <span class="token punctuation">}</span> <span class="token operator">=</span> router
  <span class="token keyword">function</span> <span class="token function">go</span> <span class="token punctuation">(</span>opt <span class="token operator">:</span> <span class="token builtin">string</span> <span class="token operator">|</span> RouteLocationRawEx<span class="token punctuation">,</span> isReplace <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">typeof</span> opt <span class="token operator">===</span> <span class="token string">&#39;string&#39;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      isReplace <span class="token operator">?</span> <span class="token function">replace</span><span class="token punctuation">(</span>opt<span class="token punctuation">)</span> <span class="token operator">:</span> <span class="token function">push</span><span class="token punctuation">(</span>opt<span class="token punctuation">)</span>
    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>	
      <span class="token keyword">const</span> o <span class="token operator">=</span> opt <span class="token keyword">as</span> RouteLocationRaw
      isReplace <span class="token operator">?</span> <span class="token function">replace</span><span class="token punctuation">(</span>o<span class="token punctuation">)</span> <span class="token operator">:</span> <span class="token function">push</span><span class="token punctuation">(</span>o<span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">return</span> go
<span class="token punctuation">}</span>

<span class="token keyword">export</span> <span class="token keyword">function</span> <span class="token function">useBack</span> <span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token keyword">void</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> <span class="token punctuation">{</span> back <span class="token punctuation">}</span> <span class="token operator">=</span> router
  <span class="token function">back</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>

</code></pre></div><p>Vue-Router çš„è·¯ç”±è·³è½¬çš„æ–¹æ³•å…¶å®æœ‰ä¸¤ç§</p><ol><li>push ä¿ç•™å†å²è®°å½•</li><li>replace ä¸ä¿ç•™å†å²è®°å½•</li></ol><p>pushï¼š</p><div class="language-js"><pre><code><span class="token comment">// æ­£å¸¸æˆ‘ä»¬è·¯ç”±è·³è½¬çš„æ–¹å¼</span>
<span class="token keyword">const</span> router <span class="token operator">=</span> <span class="token function">useRouter</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
router<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token string">&#39;/home/overview&#39;</span><span class="token punctuation">)</span> <span class="token comment">// æ–¹å¼ä¸€ï¼šä¼ é€’ path å­—ç¬¦ä¸²</span>
router<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">&#39;Home&#39;</span> <span class="token punctuation">}</span><span class="token punctuation">)</span> <span class="token comment">// æ–¹å¼äºŒï¼šä¼ é€’ä¸€ä¸ªè·¯ç”±é¡¹å¯¹è±¡</span>
</code></pre></div><p>ä¸Šé¢çš„ opt å…¶å®åšäº†ä¸€ä¸ªè¿™æ ·å­çš„åˆ¤æ–­ï¼Œæ ¹æ®ä¸åŒç±»å‹çš„ opt å°±ä»¥ä¸åŒçš„å†™æ³•/æ–¹å¼å»è·³è½¬.</p><ul><li>ä¸åŒç­–ç•¥ä¼ é€’çš„ç»“æœ</li></ul><div class="language-js"><pre><code><span class="token function">go</span><span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token literal-property property">path</span><span class="token operator">:</span> <span class="token string">&#39;/test&#39;</span><span class="token punctuation">,</span> <span class="token literal-property property">query</span><span class="token operator">:</span> <span class="token punctuation">{</span> <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">&#39;yes&#39;</span> <span class="token punctuation">}</span> <span class="token punctuation">}</span><span class="token punctuation">)</span> <span class="token comment">// http://localhost:3000?name=yes</span>
<span class="token function">go</span><span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">&#39;Test&#39;</span><span class="token punctuation">,</span> <span class="token literal-property property">params</span><span class="token operator">:</span> <span class="token punctuation">{</span> <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">&#39;yes&#39;</span> <span class="token punctuation">}</span> <span class="token punctuation">}</span><span class="token punctuation">)</span> <span class="token comment">// http://localhost:3000/yes</span>
</code></pre></div><h3 id="usecurrentinstance" tabindex="-1">useCurrentInstance <a class="header-anchor" href="#usecurrentinstance" aria-hidden="true">#</a></h3><blockquote><p>è·å¾—æ ¹å®ä¾‹ï¼Œä»è€Œæ‹¿åˆ°è¯¸å¦‚å…¨å±€å˜é‡ç­‰ä¿¡æ¯</p></blockquote><div class="language-js"><pre><code><span class="token keyword">export</span> <span class="token keyword">function</span> <span class="token function">useCurrentInstance</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> <span class="token punctuation">{</span> appContext <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token function">getCurrentInstance</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">as</span> ComponentInternalInstance
  <span class="token keyword">const</span> proxy <span class="token operator">=</span> appContext<span class="token punctuation">.</span>config<span class="token punctuation">.</span>globalProperties
  <span class="token keyword">return</span> <span class="token punctuation">{</span>
    proxy
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

</code></pre></div><blockquote><p>å‡½æ•°çš„ä½œç”¨æ˜¯è·å–å…¨å±€æŒ‚è½½çš„å±æ€§æˆ–è€…æ–¹æ³•</p></blockquote><p>å› ä¸ºæˆ‘ä»¬ä¹ŸçŸ¥é“åœ¨ vue3 å…¶å®æ˜¯ç§»é™¤äº†åŸå‹è¿™ä¸ªæ¦‚å¿µï¼Œæ‰€ä»¥æ²¡åŠæ³•åƒä»¥å‰ä¸€æ ·å°†ä¸€äº›ä¸œè¥¿æŒ‚è½½åˆ°åŸå‹ä¸Š</p><div class="language-js"><pre><code>app<span class="token punctuation">.</span>config<span class="token punctuation">.</span>globalProperties<span class="token punctuation">.</span>xxx <span class="token operator">=</span> xxx <span class="token comment">//  æ–°çš„æ–¹å¼</span>
</code></pre></div><p>â“ é‚£æ€ä¹ˆåœ¨ç»„ä»¶ä¸­è·å–è¿™äº›å˜é‡å‘¢</p><div class="language-js"><pre><code><span class="token keyword">const</span> <span class="token punctuation">{</span> proxy <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token function">useCurrentInstance</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
proxy<span class="token punctuation">.</span>xxx <span class="token comment">// å°±å¯ä»¥è®¿é—®äº†</span>
</code></pre></div><h3 id="useecharts" tabindex="-1">useEcharts <a class="header-anchor" href="#useecharts" aria-hidden="true">#</a></h3><div class="language-typescript"><pre><code><span class="token comment">// src/utils/useEcharts </span>
<span class="token keyword">import</span> <span class="token punctuation">{</span>
  TitleComponent<span class="token punctuation">,</span>
  TooltipComponent<span class="token punctuation">,</span>
  LegendComponent
<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#39;echarts/components&#39;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> PieChart <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#39;echarts/charts&#39;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> LabelLayout <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#39;echarts/features&#39;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> CanvasRenderer <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#39;echarts/renderers&#39;</span>
<span class="token keyword">import</span> <span class="token operator">*</span> <span class="token keyword">as</span> echarts <span class="token keyword">from</span> <span class="token string">&#39;echarts/core&#39;</span>

echarts<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span><span class="token punctuation">[</span>
  TitleComponent<span class="token punctuation">,</span>
  TooltipComponent<span class="token punctuation">,</span>
  LegendComponent<span class="token punctuation">,</span>
  PieChart<span class="token punctuation">,</span>
  CanvasRenderer<span class="token punctuation">,</span>
  LabelLayout
<span class="token punctuation">]</span><span class="token punctuation">)</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> echarts
</code></pre></div><p>â“ ä¸ºä»€ä¹ˆè¦æŠŠ echarts æŠ½å–å‡ºæ¥å‘¢ï¼Ÿå› ä¸ºæˆ‘ä»¬éœ€è¦æŒ‰éœ€å¼•å…¥ echarts å†…éƒ¨çš„ç»„ä»¶ï¼Œæ¯”å¦‚æˆ‘ä»¬å½“å‰ç”¨åˆ°äº†é¥¼å›¾ï¼Œç›´æ–¹å›¾ï¼ŒæŠ˜çº¿å›¾ï¼Œé‚£ä¹ˆæˆ‘ä»¬å°±éœ€è¦å¼•ç”¨é‡Œé¢çš„ç»„ä»¶ï¼Œå¦‚æœåœ¨ä¸åŒåœ°æ–¹å¼•å…¥çš„è¯å…¶å®ç›¸å¯¹æ¥è¯´è¿˜æ˜¯æŒºéº»çƒ¦çš„ï¼Œå€’ä¸å¦‚æˆ‘ä»¬æ•´ä¸ª echarts å®ä¾‹æ”¾åˆ°ä¸€ä¸ªæ–‡ä»¶é‡Œé¢ï¼Œåœ¨è¿™ä¸ªæ–‡ä»¶å†…å¼•å…¥éœ€è¦çš„ç»„ä»¶ç„¶åå¯¼å‡ºé‚£ä¹ˆä¸å°±å„ä¸ªåœ°æ–¹éƒ½å¯ä»¥ä½¿ç”¨äº†ï¼ï¼ï¼</p><h2 id="è·¨åŸŸé—®é¢˜" tabindex="-1">è·¨åŸŸé—®é¢˜ <a class="header-anchor" href="#è·¨åŸŸé—®é¢˜" aria-hidden="true">#</a></h2><ul><li>æµè§ˆå™¨é™åˆ¶ä¸åŒåè®®ï¼ŒåŸŸåï¼Œç«¯å£çš„ä¸»æœºä¹‹é—´è¿›è¡Œé€šä¿¡ï¼Œç”±æ­¤äº§ç”Ÿäº†è·¨åŸŸã€‚é‚£ä¹ˆè·¨åŸŸå¯¼è‡´çš„ç»“æœæ˜¯ä»€ä¹ˆï¼Ÿ</li></ul><p><img src="/yunshan-qingyu-docs/migration.png" alt=""></p><p>å›¾ç‰‡çš„æ„æ€å°±æ˜¯è¯´å½“æˆ‘ä»¬è®¿é—® <a href="http://120.77.245.193/blog-system" target="_blank" rel="noopener noreferrer">http://120.77.245.193/blog-system</a>.... è¿™ä¸ªèµ„æºè·¯å¾„çš„æ—¶å€™ï¼Œè¢«é™åˆ¶äº†ï¼Œå…¶å®è¿™ä¸ªé™åˆ¶æ˜¯æµè§ˆå™¨çš„é™åˆ¶ï¼Œå®ƒæç¤ºæˆ‘ä»¬å¯ä»¥ä½¿ç”¨ CORS(è·¨åŸŸèµ„æºå…±äº«) æ¥è§£å†³</p><h3 id="åå°å¤„ç†-åå‘ä»£ç†" tabindex="-1">åå°å¤„ç†(åå‘ä»£ç†) <a class="header-anchor" href="#åå°å¤„ç†-åå‘ä»£ç†" aria-hidden="true">#</a></h3><ol><li>æ”¹å˜ apache / nginx çš„é…ç½®æ–‡ä»¶æ”¯æŒ CORS</li><li>åå°è¿”å›çš„æ—¶å€™åŠ ä¸Šå¯¹åº”çš„è¿”å›æ ‡å¤´ç»™æµè§ˆå™¨</li></ol><h3 id="å‰ç«¯å¤„ç†-æ­£å‘ä»£ç†" tabindex="-1">å‰ç«¯å¤„ç†(æ­£å‘ä»£ç†) <a class="header-anchor" href="#å‰ç«¯å¤„ç†-æ­£å‘ä»£ç†" aria-hidden="true">#</a></h3><ol><li><p>é€šè¿‡è„šæ‰‹æ¶è™šæ‹Ÿä¸€ä¸ªä»£ç æœåŠ¡å™¨</p><div class="language-js"><pre><code><span class="token comment">// vite.config.ts æ·»åŠ     </span>
<span class="token literal-property property">server</span><span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token literal-property property">proxy</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token string-property property">&#39;^/api/.*&#39;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
          <span class="token literal-property property">target</span><span class="token operator">:</span> <span class="token string">&#39;http://120.25.158.199:8001&#39;</span><span class="token punctuation">,</span>
          <span class="token literal-property property">changeOrigin</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
          <span class="token literal-property property">secure</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
          <span class="token function-variable function">rewrite</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token parameter">path</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> path<span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span><span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">^\/api</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span> <span class="token string">&#39;&#39;</span><span class="token punctuation">)</span>
        <span class="token punctuation">}</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span>
</code></pre></div><p>ç„¶ååœ¨æˆ‘ä»¬å†™è¯·æ±‚æ¥å£çš„æ—¶å€™ï¼Œé»˜è®¤ä½¿ç”¨ /api å‰ç¼€ï¼Œé¡¹ç›®å¯åŠ¨çš„æ—¶å€™ï¼Œæœ¬åœ°æœåŠ¡å™¨ä¼šæ‹¦æˆªåˆ°æˆ‘ä»¬çš„ç½‘ç»œè¯·æ±‚å¹¶å°†è¯·æ±‚è½¬æ¥åˆ°ä»£ç†æœåŠ¡å™¨ä¸Šï¼Œä»£ç†æœåŠ¡å™¨é€šè¿‡ä¸æ–­çš„ ip å¯»å€æ‰¾åˆ°æˆ‘ä»¬éœ€è¦è¯·æ±‚çš„è¿œç¨‹æœåŠ¡å™¨ï¼Œç„¶åå¸®æˆ‘ä»¬å‘é€è¯·æ±‚æ¥å—è¯·æ±‚ã€‚</p></li></ol><h2 id="å¼€å‘ç¯å¢ƒ-mock" tabindex="-1">å¼€å‘ç¯å¢ƒ mock <a class="header-anchor" href="#å¼€å‘ç¯å¢ƒ-mock" aria-hidden="true">#</a></h2><p>æ’ä»¶ï¼š<code>vite-plugin-mock</code></p><p>vite-plugin-mock å…¶å®æ˜¯ä¸€ä¸ªåœ¨ vite ä¸­é›†æˆ mock çš„æ’ä»¶ã€‚ä¼ ç»Ÿçš„ mock å…¶å®éœ€è¦åœ¨æ¯ä¸ªåœ°æ–¹æŠŠ mock æ–¹æ³•å¯¼å…¥æ³¨å†Œä¸€éï¼Œå·¥åºè¾ƒä¸ºçƒ¦çï¼Œè€Œ vite-plugin-mock ä½œä¸ºä¸€ä¸ªè„šæ‰‹æ¶å±‚çº§æ”¯æŒçš„æ’ä»¶ï¼Œä½¿ç”¨ä¸Šæ— è®ºæ˜¯åœ¨å¼€å‘è¿˜æ˜¯ç”Ÿäº§é˜¶æ®µéƒ½ååˆ†ä¾¿æ·ã€‚</p><ul><li>å†…éƒ¨ä»¥ç‰¹å®šçš„ç»“æ„ç»„æˆï¼Œä½† mock çš„è¯­æ³•ä¸ mockjs ä¸€è‡´ã€‚</li></ul><div class="language-tsx"><pre><code><span class="token keyword">import</span> <span class="token punctuation">{</span> MockMethod <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#39;vite-plugin-mock&#39;</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">[</span>
  <span class="token punctuation">{</span>
    url<span class="token operator">:</span> <span class="token string">&#39;/api/get/analyses&#39;</span><span class="token punctuation">,</span>
    method<span class="token operator">:</span> <span class="token string">&#39;get&#39;</span><span class="token punctuation">,</span>
    <span class="token function">response</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">return</span> <span class="token punctuation">{</span>
        code<span class="token operator">:</span> <span class="token number">200</span><span class="token punctuation">,</span>
        <span class="token string-property property">&#39;data|50&#39;</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">{</span>
          id<span class="token operator">:</span> <span class="token string">&#39;@integer(1, 100)&#39;</span><span class="token punctuation">,</span>
          keyword<span class="token operator">:</span> <span class="token string">&#39;@csentence(5, 10)&#39;</span><span class="token punctuation">,</span>
          startTime<span class="token operator">:</span> <span class="token string">&#39;@date&#39;</span><span class="token punctuation">,</span>
          endTime<span class="token operator">:</span> <span class="token string">&#39;@date&#39;</span><span class="token punctuation">,</span>
          nowTime<span class="token operator">:</span> <span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toLocaleDateString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">split</span><span class="token punctuation">(</span><span class="token string">&#39;/&#39;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span><span class="token string">&#39;-&#39;</span><span class="token punctuation">)</span>
        <span class="token punctuation">}</span><span class="token punctuation">]</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">]</span> <span class="token keyword">as</span> MockMethod<span class="token punctuation">[</span><span class="token punctuation">]</span>
</code></pre></div><p>é¡¹ç›®å¼€å‘åˆæœŸæ²¡æœ‰åå°ä»‹å…¥æ•°æ®æ— æ³•æ­£å¸¸æ˜¾ç¤ºï¼ŒåŸºäºæ’ä»¶çš„ç‰¹æ€§ï¼Œé…ç½® mock æ‹¦æˆªåœ¨ç”Ÿäº§ç¯å¢ƒç”Ÿæ•ˆã€‚åœ¨ <code>vite.config.ts</code> å¢åŠ æ’ä»¶é…ç½®ï¼Œé…ç½®çš„å…³é”®åœ¨äºæ˜¯å¦å¼€å¯ç”Ÿäº§ç¯å¢ƒçš„ mockï¼Œå¦‚æœå¼€å¯äº†ï¼Œé‚£ä¹ˆå°±ä¼šåœ¨ç”Ÿäº§é˜¶æ®µæ‰§è¡Œ injectCode é‡Œé¢çš„ä»£ç ã€‚</p><div class="language-tsx"><pre><code><span class="token function">viteMockServe</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
   ignore<span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">^\_</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span>
    mockPath<span class="token operator">:</span> <span class="token string">&#39;mock&#39;</span><span class="token punctuation">,</span> <span class="token comment">// mock åœ°å€</span>
    localEnabled<span class="token operator">:</span> localEnable<span class="token punctuation">,</span> <span class="token comment">// å¼€å‘ç¯å¢ƒæ˜¯å¦å¼€å¯ mock</span>
    prodEnabled<span class="token operator">:</span> productEnable<span class="token punctuation">,</span> <span class="token comment">// ç”Ÿäº§ç¯å¢ƒæ˜¯å¦å¼€å¯ mock</span>
    supportTs<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span> <span class="token comment">// ç›‘å¬ .ts æ–‡ä»¶(ä¸æ­¤å¸¦æ¥çš„åæœæ˜¯æ— æ³•ç›‘å¬ .js æ–‡ä»¶)</span>
    injectCode<span class="token operator">:</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">
       import { setupProdMockServer } from &#39;../mock/_setupMockProdServer&#39;;
        setupProdMockServer();
      </span><span class="token template-punctuation string">`</span></span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
</code></pre></div><div class="language-tsx"><pre><code><span class="token comment">// mock/_setupMockProdServer.ts</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> createProdMockServer <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#39;vite-plugin-mock/es/createProdMockServer&#39;</span>

<span class="token keyword">const</span> modules <span class="token operator">=</span> <span class="token keyword">import</span><span class="token punctuation">.</span>meta<span class="token punctuation">.</span><span class="token function">globEager</span><span class="token punctuation">(</span><span class="token string">&#39;./**/*.ts&#39;</span><span class="token punctuation">)</span>
<span class="token keyword">const</span> mockModules<span class="token operator">:</span> <span class="token builtin">any</span><span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>

<span class="token comment">// åŠ è½½ &amp; æ’é™¤æ¨¡å—</span>
Object<span class="token punctuation">.</span><span class="token function">keys</span><span class="token punctuation">(</span>modules<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span>item <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>item<span class="token punctuation">.</span><span class="token function">includes</span><span class="token punctuation">(</span><span class="token string">&#39;/_&#39;</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token keyword">undefined</span>
  <span class="token punctuation">}</span>
  mockModules<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token operator">...</span>modules<span class="token punctuation">[</span>item<span class="token punctuation">]</span><span class="token punctuation">.</span>default<span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>

<span class="token keyword">export</span> <span class="token keyword">function</span> <span class="token function">setupProdMockServer</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token function">createProdMockServer</span><span class="token punctuation">(</span>mockModules<span class="token punctuation">)</span>
<span class="token punctuation">}</span>

</code></pre></div><p><code>_setupMockProdServer</code> å…¶å®æ˜¯åˆ©ç”¨äº† vite æä¾›æ£€ç´¢æ–‡ä»¶çš„ apiï¼Œæ£€ç´¢ mock æ–‡ä»¶å¤¹å†…çš„æ‰€æœ‰æ–‡ä»¶ï¼Œç„¶åé€šè¿‡ <code>createProdMockServer</code> æ³¨å†Œ mock åˆ—è¡¨ï¼Œå®Œæˆåœ¨ç”Ÿäº§ç¯å¢ƒçš„åº”ç”¨ã€‚</p><h2 id="åº”ç”¨éƒ¨ç½²" tabindex="-1">åº”ç”¨éƒ¨ç½² <a class="header-anchor" href="#åº”ç”¨éƒ¨ç½²" aria-hidden="true">#</a></h2><p>ç”±äºè·¯ç”±æ¨¡å¼ä½¿ç”¨çš„æ˜¯ history æ¨¡å¼ï¼Œå› æ­¤å›é€€æˆ–è€…åˆ·æ–°é¡µé¢éš¾å…ä¼šå‡ºç°æ‰¾ä¸åˆ°èµ„æºè·¯å¾„çš„æƒ…å†µï¼Œè€Œå½“æ—¶åˆ·æ–°é¡µé¢çš„æ—¶å€™ <code>/yunshan-qingyu/home/overview</code> æµè§ˆå™¨ä¼šå‘æœåŠ¡å™¨è¯·æ±‚è¿™ä¸ªèµ„æºï¼Œä½†æ˜¯æœåŠ¡å™¨å†…å…¶å®å¹¶æ²¡æœ‰è¿™ä¸ªèµ„æºè·¯å¾„ï¼Œå› ä¸ºå¯¹åº”æ¥è¯´åœ¨ Vue åº”ç”¨é‡Œé¢æˆ‘ä»¬æ˜¯ä½¿ç”¨ JS æ¥è¿›è¡Œè·¯ç”±å¯¼èˆªçš„ï¼Œæ¸²æŸ“é¡µé¢çš„è¿‡ç¨‹ä¸ºå†…éƒ¨å¤„ç†ï¼Œè¿™ä¹Ÿæ˜¯ SPA çš„ç‰¹æ€§ã€‚</p><blockquote><p>æ„å»ºç»“æŸä¼šæŠŠ <code>main.ts</code> é‡Œé¢çš„å†…å®¹åˆå¹¶ä¸ºä¸€ä¸ª chunk åŒ…åœ¨ html ä¸­è¿›è¡Œå¼•å…¥ï¼Œ</p></blockquote><div class="language-html"><div class="highlight-lines"><br><br><br><br><br><br><br><br><br><br><div class="highlighted">Â </div><br><br><br><br><br><br><br><br><br><br></div><pre><code><span class="token doctype"><span class="token punctuation">&lt;!</span><span class="token doctype-tag">DOCTYPE</span> <span class="token name">html</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>html</span> <span class="token attr-name">lang</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>en<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>head</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">charset</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>UTF-8<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>referrer<span class="token punctuation">&quot;</span></span> <span class="token attr-name">content</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>no-referrer<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>link</span> <span class="token attr-name">rel</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>icon<span class="token punctuation">&quot;</span></span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>/yunshan-qingyu/favicon.ico<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>viewport<span class="token punctuation">&quot;</span></span> <span class="token attr-name">content</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>width=device-width, initial-scale=1.0<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>title</span><span class="token punctuation">&gt;</span></span>äº‘å±±æ™´é›¨<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>title</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>module<span class="token punctuation">&quot;</span></span> <span class="token attr-name">crossorigin</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>/yunshan-qingyu/assets/index.210becc0.js<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token script"></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>link</span> <span class="token attr-name">rel</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>modulepreload<span class="token punctuation">&quot;</span></span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>/yunshan-qingyu/assets/vendor.9d0a82a1.js<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>link</span> <span class="token attr-name">rel</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>stylesheet<span class="token punctuation">&quot;</span></span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>/yunshan-qingyu/assets/vendor.82c3829d.css<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>link</span> <span class="token attr-name">rel</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>stylesheet<span class="token punctuation">&quot;</span></span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>/yunshan-qingyu/assets/index.bfce105e.css<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>head</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>body</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>app<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>body</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>html</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><div class="tip custom-block"><p class="custom-block-title">TIP</p><p>è§£å†³çš„æ–¹æ³•å…¶å®å°±æ˜¯æˆ‘ä»¬å»ä¿®æ”¹ http æœåŠ¡å™¨çš„é…ç½®æ–‡ä»¶å¯¹å½“å‰æ— æ³•åŒ¹é…çš„è·¯å¾„è¿›è¡Œé‡å®šå‘ã€‚</p></div><p>å¯¹äº apache æœåŠ¡å™¨ï¼Œæ–°å»ºä¸€ä¸ª .htaccess æ–‡ä»¶åœ¨æœåŠ¡æ ¹ç›®å½•ä¸‹(å¯ä»¥åˆ° http.conf æŸ¥çœ‹å½“å‰æŒ‚è½½çš„æ ¹ç›®å½•åœ¨å“ª)ï¼Œç„¶åä½¿ç”¨ IfModule æ¥é‡å†™å®šå‘è§„åˆ™ã€‚å¤§æ¦‚çš„æ€è·¯å°±æ˜¯æŒ‡å®šä¸€ä¸ª baseï¼ŒæŒ‡å®šä¸€ä¸ªé‡å®šå‘ç»ˆç‚¹æ–‡ä»¶ <code>index.html</code></p><div class="language-"><pre><code>&lt;IfModule mod_rewrite.c&gt;
RewriteEngine On
RewriteBase /
RewriteRule ^index\.html$ - [L]
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule . /index.html [L]
&lt;/IfModule&gt;
</code></pre></div><h2 id="åŠŸèƒ½äº®ç‚¹" tabindex="-1">åŠŸèƒ½äº®ç‚¹ <a class="header-anchor" href="#åŠŸèƒ½äº®ç‚¹" aria-hidden="true">#</a></h2><h3 id="è¾“å…¥æ¡†çº§è”" tabindex="-1">è¾“å…¥æ¡†çº§è” <a class="header-anchor" href="#è¾“å…¥æ¡†çº§è”" aria-hidden="true">#</a></h3><p>ï¼Ÿï¼Ÿï¼Ÿ</p><h2 id="è¡¥å……çŸ¥è¯†" tabindex="-1">è¡¥å……çŸ¥è¯† <a class="header-anchor" href="#è¡¥å……çŸ¥è¯†" aria-hidden="true">#</a></h2><h3 id="object-çš„åºåˆ—åŒ–" tabindex="-1">Object çš„åºåˆ—åŒ– <a class="header-anchor" href="#object-çš„åºåˆ—åŒ–" aria-hidden="true">#</a></h3><div class="language-js"><pre><code><span class="token keyword">const</span> obj <span class="token operator">=</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">&#39;wyl&#39;</span><span class="token punctuation">,</span>
    <span class="token literal-property property">age</span><span class="token operator">:</span> <span class="token number">20</span>
<span class="token punctuation">}</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>obj<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">// è¾“å‡ºçš„æ˜¯ [object Object]</span>

<span class="token keyword">const</span> obj <span class="token operator">=</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">&#39;wyl&#39;</span><span class="token punctuation">,</span>
    <span class="token literal-property property">age</span><span class="token operator">:</span> <span class="token number">20</span><span class="token punctuation">,</span>
    <span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token string">&#39;wyl&#39;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>obj<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">// è¾“å‡ºçš„æ˜¯ wyl</span>
</code></pre></div><p><img src="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-user-assets/2019/10/20/16de9512eaf1158a~tplv-t2oaga2asx-zoom-in-crop-mark:1304:0:0:0.awebp" alt=""></p><p>å¯¹è±¡è½¬ä¸ºåŸå§‹ç±»å‹</p><ul><li>å¦‚æœ<a href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Symbol/toPrimitive" target="_blank" rel="noopener noreferrer">Symbol.toPrimitive</a>æ–¹æ³•ï¼Œä¼˜å…ˆè°ƒç”¨å†è¿”å›</li></ul><blockquote><p>valueOf å’Œ toString çš„ä¼˜å…ˆçº§éšç€è½¬æ¢ç±»å‹çš„ä¸åŒè€Œä¸åŒ</p></blockquote><ul><li><a href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Object/valueOf" target="_blank" rel="noopener noreferrer">valueOf()</a>ï¼Œå¦‚æœè½¬æ¢ä¸ºåŸå§‹ç±»å‹ï¼Œåˆ™è¿”å›</li><li>toString()ï¼Œå¦‚æœè½¬æ¢ä¸ºåŸå§‹ç±»å‹ï¼Œåˆ™è¿”å›</li><li>å¦‚æœéƒ½æ²¡æœ‰è¿”å›åŸå§‹ç±»å‹ï¼Œä¼šæŠ¥é”™</li></ul><div class="language-js"><pre><code><span class="token keyword">const</span> a <span class="token operator">=</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">&#39;wyl&#39;</span><span class="token punctuation">,</span>
    <span class="token literal-property property">age</span><span class="token operator">:</span> <span class="token number">20</span><span class="token punctuation">,</span>
    <span class="token punctuation">[</span>Symbol<span class="token punctuation">.</span>toPrimitive<span class="token punctuation">]</span><span class="token punctuation">(</span><span class="token parameter">hint</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token comment">// hint å°±æ˜¯å½“å‰éœ€è¦è½¬åŒ–çš„ç±»å‹</span>
        <span class="token keyword">if</span><span class="token punctuation">(</span>hint <span class="token operator">===</span> <span class="token string">&#39;number&#39;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token comment">// å¦‚æœå½“å‰éœ€è¦è½¬åŒ–çš„æ˜¯ number</span>
            <span class="token keyword">return</span> <span class="token number">10</span>
        <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span><span class="token punctuation">(</span>hint <span class="token operator">===</span> <span class="token string">&#39;string&#39;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token comment">// å¦‚æœå½“å‰éœ€è¦è½¬åŒ–çš„æ˜¯string</span>
            <span class="token keyword">return</span> <span class="token string">&#39;wyl&#39;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token function">valueOf</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token number">1</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token string">&#39;10&#39;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token operator">+</span>a<span class="token punctuation">)</span> <span class="token comment">// 10</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token function">String</span><span class="token punctuation">(</span>a<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">// wyl</span>
</code></pre></div><p>é’ˆå¯¹ä¸Šé¢çš„è¾“å‡ºç»“æœï¼Œæˆ‘ä»¬å¯ä»¥çœ‹åˆ° Symbol.toPrimitive çš„ä¼˜å…ˆçº§æ˜¯æœ€é«˜çš„ï¼Œæ— è®ºæ˜¯å­—ç¬¦ä¸²è¿˜æ˜¯æ•°å€¼ï¼Œéƒ½ä¼šä¼˜å…ˆè°ƒç”¨ã€‚è€Œå¯¹äº valueOf å’Œ toStringã€‚</p><ul><li>å¦‚æœæ˜¯è½¬åŒ–ä¸ºå­—ç¬¦ä¸²çš„è¯ï¼Œåˆ™ä¼˜å…ˆè°ƒç”¨ toString</li><li>å¦‚æœæ˜¯è½¬åŒ–ä¸ºæ•°å€¼çš„è¯ï¼Œåˆ™ä¼˜å…ˆè°ƒç”¨ valueOf</li><li>å…·ä½“çš„æ•ˆæœå¯ä»¥ é€šè¿‡æŠŠ Symbol.toPrimitive æ³¨é‡Šæ‰çœ‹çœ‹</li></ul><h3 id="ç±»å‹åˆ¤æ–­" tabindex="-1">ç±»å‹åˆ¤æ–­ <a class="header-anchor" href="#ç±»å‹åˆ¤æ–­" aria-hidden="true">#</a></h3><h4 id="instanceof" tabindex="-1"><a href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Operators/instanceof" target="_blank" rel="noopener noreferrer">instanceof</a> <a class="header-anchor" href="#instanceof" aria-hidden="true">#</a></h4><blockquote><p>åˆ¤æ–­ä¸€ä¸ªå˜é‡æ˜¯å¦æ˜¯å¦ä¸€ä¸ªå˜é‡çš„åŸå‹</p></blockquote><h4 id="typeof" tabindex="-1"><a href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Operators/typeof" target="_blank" rel="noopener noreferrer">typeof</a> <a class="header-anchor" href="#typeof" aria-hidden="true">#</a></h4><blockquote><p>åˆ¤æ–­åŸºç¡€ç±»å‹</p></blockquote><h4 id="object-prototype-tostring" tabindex="-1"><a href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Object/toString" target="_blank" rel="noopener noreferrer">Object.prototype.toString</a> <a class="header-anchor" href="#object-prototype-tostring" aria-hidden="true">#</a></h4><blockquote><p>ç²¾ç¡®åˆ¤æ–­å˜é‡çš„ç±»å‹</p></blockquote><div class="language-js"><pre><code><span class="token comment">// Boolean ç±»å‹ï¼Œtag ä¸º &quot;Boolean&quot;</span>
<span class="token class-name">Object</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token comment">// =&gt; &quot;[object Boolean]&quot;</span>

<span class="token comment">// Number ç±»å‹ï¼Œtag ä¸º &quot;Number&quot;</span>
<span class="token class-name">Object</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>               <span class="token comment">// =&gt; &quot;[object Boolean]&quot;</span>

<span class="token comment">// String ç±»å‹ï¼Œtag ä¸º &quot;String&quot;</span>
<span class="token class-name">Object</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span><span class="token string">&quot;&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>              <span class="token comment">// =&gt; &quot;[object String]&quot;</span>

<span class="token comment">// Array ç±»å‹ï¼Œtag ä¸º &quot;String&quot;</span>
<span class="token class-name">Object</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>              <span class="token comment">// =&gt; &quot;[object Array]&quot;</span>

<span class="token comment">// Function ç±»å‹ï¼Œ tag ä¸º &quot;Function&quot;</span>
<span class="token class-name">Object</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token comment">// =&gt; &quot;[object Function]&quot;</span>

<span class="token comment">// Error ç±»å‹ï¼ˆåŒ…å«å­ç±»å‹ï¼‰ï¼Œtag ä¸º &quot;Error&quot;</span>
<span class="token class-name">Object</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Error</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>     <span class="token comment">// =&gt; &quot;[object Error]&quot;</span>

<span class="token comment">// RegExp ç±»å‹ï¼Œtag ä¸º &quot;RegExp&quot;</span>
<span class="token class-name">Object</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span><span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">\d+</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>           <span class="token comment">// =&gt; &quot;[object RegExp]&quot;</span>

<span class="token comment">// Date ç±»å‹ï¼Œtag ä¸º &quot;Date&quot;</span>
<span class="token class-name">Object</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>      <span class="token comment">// =&gt; &quot;[object Date]&quot;</span>

<span class="token comment">// å…¶ä»–ç±»å‹ï¼Œtag ä¸º &quot;Object&quot;</span>
<span class="token class-name">Object</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">class</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token comment">// =&gt; &quot;[object Object]&quot;</span>
</code></pre></div><div class="language-js"><pre><code><span class="token comment">// æ€»ç»“ä¸€ä¸‹æˆ‘ä»¬å¯ä»¥æŠ½å–ä¸€ä¸ªç²¾ç¡®åˆ¤æ–­å˜é‡ç±»å‹çš„æ–¹æ³•</span>
<span class="token keyword">function</span> <span class="token function">toRawType</span><span class="token punctuation">(</span><span class="token parameter">param</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	<span class="token keyword">return</span> <span class="token class-name">Object</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span>param<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">slice</span><span class="token punctuation">(</span><span class="token number">8</span><span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token function">toRawType</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">// Array</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token function">toRawType</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">// Object</span>
</code></pre></div><p>fighting fighting !!!! <img src="/yunshan-qingyu-docs/cute.jpg" alt=""></p></div></div><footer class="page-footer" data-v-7eddb2c4 data-v-07c132fc><div class="edit" data-v-07c132fc><div class="edit-link" data-v-07c132fc data-v-1ed99556><!----></div></div><div class="updated" data-v-07c132fc><!----></div></footer><!----><!--[--><!--]--></div></main></div><!----><!--]--></div>
    <script>__VP_HASH_MAP__ = JSON.parse("{\"index.md\":\"9d8a7904\",\"learning_index.md\":\"f620b335\"}")</script>
    <script type="module" async src="/yunshan-qingyu-docs/assets/app.2f45899f.js"></script>
    
  </body>
</html>